<!DOCTYPE html><html lang="zh-Hant"><head>
<meta charset="UTF-8">
<title>ç™»å…¥ Â· Rust Chat</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="/app.css">
</head><body class="login flex flex-col items-center pt-20 text-white">

<div class="w-80 space-y-3 bg-white/10 rounded-xl p-6 shadow-lg">
  <h2 class="text-center text-2xl font-bold mb-2">ç™»å…¥èŠå¤©å®¤</h2>

  <input id="user" class="w-full p-2 rounded bg-white/80 text-gray-900" placeholder="ä½¿ç”¨è€…åç¨±">
  <input id="pass" type="password" class="w-full p-2 rounded bg-white/80 text-gray-900" placeholder="å¯†ç¢¼">

  <select id="room" class="w-full p-2 rounded bg-white/80 text-gray-900">
    <option value="lobby">lobby</option>
    <option value="tech">tech</option>
    <option value="random">random</option>
    <option value="gpt4o">gpt-4o ğŸ¤–</option>
  </select>

  <button id="loginBtn" class="w-full py-2 rounded bg-emerald-600 hover:bg-emerald-700">ç™»å…¥</button>

  <p class="text-xs text-center mt-2">
    æ²’æœ‰å¸³è™Ÿï¼Ÿ<a href="/register.html" class="underline">ç«‹å³è¨»å†Š</a>
  </p>
</div>

<audio id="bgm" src="/bgm.mp3" preload="auto" loop></audio>

<script type="module">
import {api,toast} from "/js/helper.js";

loginBtn.onclick = async ()=>{
  if(!user.value||!pass.value) return toast("è«‹å¡«å¸³å¯†");
  try{
    const {token}=await api("/api/login",{username:user.value,password:pass.value});
    sessionStorage.setItem("token",token);
    sessionStorage.setItem("username",user.value);
    sessionStorage.setItem("room",room.value);
    location.href="/chat.html";
  }catch{ toast("âŒ å¸³å¯†éŒ¯èª¤"); }
};

document.addEventListener("click",()=>{bgm.volume=.3;bgm.play().catch(()=>{})},{once:true});
</script>
</body></html>
